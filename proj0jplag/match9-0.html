<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>sub_679001</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>NBody.java</CENTER></H3><HR>
<PRE>
<A NAME="0"></A><FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match9-1.html#0',3,'match9-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>public class NBody {

  public static double readRadius(String address){
    In in = new In(address);
    in.readInt();
    return in.readDouble();
  }
  public static Planet[] readPlanets(String address){
    In in = new In(address);
    int length = in.readInt();
    in.readDouble();
    Planet[] planets = new Planet[length];
    for (int i = 0; i &lt; length; i++){
      double xxPos = in.readDouble();
      double yyPos = in.readDouble();
      double xxVel = in.readDouble();
      double yyVel = in.readDouble();
      double mass = in.readDouble();
      String imgFileName = in.readString();
      planets[i] = new Planet(xxPos, yyPos, xxVel, yyVel, mass, imgFileName);
    }
    return planets;
  }
  private static String imageToDraw = &quot;images/starfield.jpg&quot;;
  public static void main(String[] args){
      double T = Double.parseDouble(args[0]);
      double dt = Double.parseDouble(args[1]);
      String filename = args[2];
      double radius = readRadius(filename);
      StdDraw.setScale(-radius, radius);
      StdDraw.clear();
      Planet[] planets = readPlanets(filename);
      for (int time = 0; time &lt; T; time += dt){
        double xForces[] = new double[planets.length];
        double yForces[] = new double[planets.length];
        StdDraw.picture(0, 0, imageToDraw);
        for (int i = 0; i &lt; planets.length; i++) {
          xForces[i] = planets[i].calcNetForceExertedByX(planets);
          yForces[i] = planets[i].calcNetForceExertedByY(planets);
          planets[i].update(dt, xForces[i], yForces[i]);
          planets[i].draw();
        }
        StdDraw.show(10);
      }
      /* Code Snippet from hints */
      StdOut.printf(&quot;%d\n&quot;, planets.length);
      StdOut.printf(&quot;%.2e\n&quot;, radius);
      for (int i = 0; i &lt; planets.length; i++) {
        StdOut.printf(&quot;%11.4e %11.4e %11.4e %11.4e %11.4e %12s\n&quot;,
            planets[i].xxPos, planets[i].yyPos, planets[i].xxVel, planets[i].yyVel, planets[i].mass, planets[i].imgFileName);
      }
  }


}</B></FONT>
</PRE>
<HR>
<H3><CENTER>Planet.java</CENTER></H3><HR>
<PRE>
<A NAME="1"></A><FONT color="#f63526"><A HREF="javascript:ZweiFrames('match9-1.html#1',3,'match9-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>public class Planet {
  public double xxPos;
  public double yyPos;
  public double xxVel;
  public double yyVel;
  public double mass;
  public String imgFileName;

  public Planet(double xP, double yP, double xV, double yV, double m, String img) {
    xxPos = xP;
    yyPos = yP;
    xxVel = xV;
    yyVel = yV;
    mass = m;
    imgFileName = img;
  }
  public Planet(Planet p) {
    xxPos = p.xxPos;
    yyPos = p.yyPos;
    xxVel = p.xxVel;
    yyVel = p.yyVel;
    mass = p.mass;
    imgFileName = p.imgFileName;
  }
  public double calcDistance(Planet p) {
    return Math.sqrt((this.xxPos - p.xxPos)*(this.xxPos - p.xxPos) + (this.yyPos - p.yyPos)*(this.yyPos - p.yyPos));
  }
  public double calcForceExertedBy(Planet p) {
    return (6.67 * Math.pow(10, -11) * this.mass * p.mass) / (Math.pow(this.calcDistance(p), 2));
  }
  public double calcForceExertedByX(Planet p) {
    return this.calcForceExertedBy(p) * (p.xxPos - this.xxPos) / this.calcDistance(p);
  }
  public double calcForceExertedByY(Planet p) {
    return this.calcForceExertedBy(p) * (p.yyPos - this.yyPos) / this.calcDistance(p);
  }
  public double calcNetForceExertedByX(Planet[] ps) {
    double net = 0;
    for(int i = 0; i &lt; ps.length; i++) {
      if (ps[i] != this) {
        net += this.calcForceExertedByX(ps[i]);
      }
    }
    return net;
  }

  public double calcNetForceExertedByY(Planet[] ps) {
    double net = 0;
    for(int i = 0; i &lt; ps.length; i++) {
      if (ps[i] != this) {
        net += this.calcForceExertedByY(ps[i]);
      }
    }
    return net;
  }
  public void update(double dt, double fX, double fY) {
    double ax = fX / this.mass;
    double ay = fY / this.mass;

    this.xxVel += ax * dt;
    this.yyVel += ay * dt;
    this.xxPos += xxVel * dt;
    this.yyPos += yyVel * dt;
  }
  public void draw(){
  		StdDraw.picture(this.xxPos, this.yyPos, &quot;images/&quot; + this.imgFileName);
  }
}</B></FONT>
</PRE>
</BODY>
</HTML>
