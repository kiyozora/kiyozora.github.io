<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>sub_725446</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>NBody.java</CENTER></H3><HR>
<PRE>
<A NAME="0"></A>/** NBody class for project 0
 *  @author: Austin Shin, Ninh Do
 */
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match10-1.html#0',3,'match10-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>public class NBody {
    
    private static String imageToDraw = &quot;./images/starfield.jpg&quot;;

    /** Reads the given path file then returns the radius. */
    public static double readRadius(String path) {
        double radiusPlanet = 0.0;
        
        In in = new In(path);

        if (!in.isEmpty()) {
            int numPlanet = in.readInt();
            radiusPlanet = in.readDouble();
        }
        return radiusPlanet;
    }

    /** Reads the given path file then returns an array holding all the Planet objects. */
    public static Planet[] readPlanets(String path) {
        In in = new In(path);

        int numPlanet = in.readInt();
        double radiusPlanet = in.readDouble();
        double xxPos = 0;
        double yyPos = 0;
        double xxVel = 0;
        double yyVel = 0;
        double mass = 0;
        String img = &quot;&quot;;
        Planet[] ps = new Planet[numPlanet];

        for (int i = 0; i&lt;numPlanet; i++) {
            xxPos = in.readDouble();
            yyPos = in.readDouble();
            xxVel = in.readDouble();
            yyVel = in.readDouble();
            mass = in.readDouble();
            img = in.readString();

            ps[i] = new Planet(xxPos, yyPos, xxVel, yyVel, mass, img);
        }
        return ps;
    }

    public static void main(String[] args) {

        if (args.length != 3) {
            System.out.println(&quot;Please input 3 arguments&quot;);
            System.exit(0);
        }

        double T = Double.parseDouble(args[0]);
        double dt = Double.parseDouble(args[1]);
        String filename = args[2];

        double radiusPlanet = NBody.readRadius(filename);
        Planet[] ps = NBody.readPlanets(filename);
        int numPlanet = ps.length;

        StdDraw.setScale(-radiusPlanet, radiusPlanet); //Sets the background
        StdAudio.play(&quot;./audio/2001.mid&quot;); //Plays music file

        for (double time=0; time&lt;T; time+=dt) {
            double [] xForces = new double[numPlanet];
            double [] yForces = new double[numPlanet];

            for (int i=0; i&lt;numPlanet; i++) {
                xForces[i] = ps[i].calcNetForceExertedByX(ps);
                yForces[i] = ps[i].calcNetForceExertedByY(ps);
            }
            for (int i=0; i&lt;numPlanet; i++) {
                ps[i].update(dt,xForces[i],yForces[i]);
            }
            StdDraw.picture(0, 0, imageToDraw);
            for (int i = 0; i &lt; numPlanet; i++){
                ps[i].draw();
            }
            StdDraw.show(10); 
        }

        StdOut.printf(&quot;%d\n&quot;, numPlanet);
        StdOut.printf(&quot;%.2e\n&quot;, radiusPlanet);
        for (int i = 0; i &lt; numPlanet; i++) {
            StdOut.printf(&quot;%11.4e %11.4e %11.4e %11.4e %11.4e %12s\n&quot;,
                    ps[i].xxPos, ps[i].yyPos, ps[i].xxVel, ps[i].yyVel, ps[i].mass, ps[i].imgFileName);
        }

    }
}</B></FONT>
</PRE>
<HR>
<H3><CENTER>Planet.java</CENTER></H3><HR>
<PRE>
<A NAME="1"></A>/** Planet class for project 0.
 *  @author: Austin Shin, Ninh Do
 */
<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match10-1.html#1',3,'match10-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>public class Planet {
    /** Initialize instance variables for constructor.*/
    public double xxPos;
    public double yyPos;
    public double xxVel;
    public double yyVel;
    public double mass;
    public String imgFileName;
    
    /** Planet constructor that is initalized through values given by user. */
    public Planet (double xP, double yP, double xV, double yV, double m, String img) {
        xxPos = xP;
        yyPos = yP;
        xxVel = xV;
        yyVel = yV;
        mass = m;
        imgFileName = img;
    }
    /** Takes in an object Planet p and then intializes a copy of the planet (constructor). */
    public Planet(Planet p) {
        xxPos = p.xxPos;
        yyPos = p.yyPos;
        xxVel = p.xxVel;
        yyVel = p.yyVel;
        mass = p.mass;
        imgFileName = p.imgFileName;
    }

    /** Takes in an object Planet and then calculates the distance between given planet and original planet. */
    public double calcDistance(Planet p) {
        double dx2 = (xxPos - p.xxPos) * (xxPos - p.xxPos);
        double dy2 = (yyPos - p.yyPos) * (yyPos - p.yyPos);
        double ry2 = dx2 + dy2;
        double r = Math.sqrt(ry2);
        return r;
    }

    /** Takes in an object Planet and then calculates the Force exerted on this planet by the given planet.  */
    public double calcForceExertedBy(Planet p) {
        double G = 6.67E-11;
        double r = calcDistance(p);
        double Force = (G * mass * p.mass) / (r * r);
        return Force;
    }
    /** Takes in an object Planet and then calculates the Force exerted in the X direction. */
    public double calcForceExertedByX(Planet p) {
        double dx = p.xxPos - xxPos;
        double r = calcDistance(p);
        double F = calcForceExertedBy(p);
        double Fx = F * dx / r;
        return Fx;
    }

    /** Takes in an object Planet and then calculates the Force exerted in the Y direction. */
    public double calcForceExertedByY(Planet p) {
        double dy = p.yyPos - yyPos;
        double r = calcDistance(p);
        double F = calcForceExertedBy(p);
        double Fy = F * dy / r;
        return Fy;
    }

    /** Takes in an object Planet and then calculates the Net Force exerted in the X direction. */
    public double calcNetForceExertedByX(Planet[] ps) {
        double Fx = 0.0;
        for (int index=0; index &lt; ps.length; index++) {
            if (ps[index].equals(this) == false) {
                Fx += calcForceExertedByX(ps[index]);
            }
        }
        return Fx;
    }

    /** Takes in an object Planet and then calculates the Net Force exerted in the Y direction. */
    public double calcNetForceExertedByY(Planet[] ps) {
        double Fy = 0.0;
        for (int index=0; index &lt; ps.length; index++) {
            if (ps[index].equals(this) == false) {
                Fy += calcForceExertedByY(ps[index]);
            }
        }
        return Fy;
    }

    public void update(double dt, double fX, double fY) {
        double ax = fX/mass;
        double ay = fY/mass;
        xxVel = xxVel + dt * ax;
        yyVel = yyVel + dt * ay;
        xxPos = xxPos + dt * xxVel;
        yyPos = yyPos + dt * yyVel;
    }

    public void draw(){
        String path = &quot;./images/&quot; + imgFileName;
        StdDraw.picture(xxPos, yyPos, path);
    }

}</B></FONT>
</PRE>
</BODY>
</HTML>
