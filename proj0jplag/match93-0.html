<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>sub_659508</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>NBody.java</CENTER></H3><HR>
<PRE>
<A NAME="0"></A>public class NBody {
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match93-1.html#0',3,'match93-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>	public static double readRadius(String fileName) {
		In in = new In(fileName);
		//Ignores the number of planets and skips to the radius double.
		in.readInt();
		return in.readDouble();
	}
	public static Planet [] readPlanets(String fileName) {
		/* Creates a Planet array of length specified with the first number in the file. 
		   Fills the array with data read from the specified text file, following the N rows of 
		   6 values format on the project page.
		*/
		In in = new In(fileName);
		int numRows = in.readInt();
		Planet [] planets = new Planet[numRows];
		in.readDouble();
		for (int i = 0; i&lt;numRows ;i++) {
			double xP = in.readDouble();
			double yP = in.readDouble();
			double xV = in.readDouble();
			double yV = in.readDouble();
			double m = in.readDouble();
			String img = in.readString();
			//img = &quot;images/&quot;+img; //adds correct directory to file name,
			//comment out / change if images are not in a separate directory
			planets[i] = new Planet(xP,yP,xV,yV,m,img);
		}
<A NAME="1"></A>		return planets;

	}</B></FONT>
<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match93-1.html#1',3,'match93-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>	public static void main(String [] args) {
		/*  Should be passed three arguments from the command line: a total time double, 
			a desired time increment, and a path for a text file containing correctly formatted
			data for a system. StdDraw is then used to draw the background image and planets 
			along with updating them until k*dt &gt; T. The final outputs are printed to the
			terminal using the code from the project webpage. Yay!
		*/ 
		double T = Double.parseDouble(args[0]);
		double dt = Double.parseDouble(args[1]);
		String filename = args[2];
		double radius = readRadius(filename);
		Planet[] planets = readPlanets(filename);</B></FONT>
		StdDraw.setScale(-radius,radius);
		StdDraw.picture(0,0,&quot;images/starfield.jpg&quot;);
<A NAME="2"></A>		for (Planet planet: planets) {
			planet.draw();
		}
<FONT color="#77bfc7"><A HREF="javascript:ZweiFrames('match93-1.html#2',3,'match93-top.html#2',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>		double t = 0;
		while (t&lt;T) {
			double[] xForces = new double[planets.length];
			double[] yForces = new double[planets.length];
			for (int i = 0;i&lt;planets.length;i++) {
				xForces[i] = planets[i].calcNetForceExertedByX(planets);
				yForces[i] = planets[i].calcNetForceExertedByY(planets);
			}
			StdDraw.picture(0,0,&quot;images/starfield.jpg&quot;);
			for (int i = 0;i&lt;planets.length;i++) {
				planets[i].update(dt,xForces[i],yForces[i]);
				planets[i].draw();
			}
			StdDraw.show(10);
			t += dt;
		}
		StdOut.printf(&quot;%d\n&quot;, planets.length);
		StdOut.printf(&quot;%.2e\n&quot;, radius);
		for (int i = 0; i &lt; planets.length; i++) {
			StdOut.printf(&quot;%11.4e %11.4e %11.4e %11.4e %11.4e %12s\n&quot;,
   			planets[i].xxPos, planets[i].yyPos, planets[i].xxVel, planets[i].yyVel, planets[i].mass, planets[i].imgFileName);

		}	
	}</B></FONT>
}
</PRE>
<HR>
<H3><CENTER>Planet.java</CENTER></H3><HR>
<PRE>
public class Planet {
<A NAME="3"></A>	public double xxPos,yyPos,xxVel,yyVel,mass;
	public String imgFileName;
	private static double G = 6.67 * Math.pow(10,-11);
<FONT color="#6cc417"><A HREF="javascript:ZweiFrames('match93-1.html#3',3,'match93-top.html#3',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>	public Planet(double xP, double yP, double xV, double yV,
				   double m, String img) {
		/*  A planet has 6 parameters: x and y components of the position and velocity and a mass value, represented as doubles,
			and then a String for an image file path.
		*/
		xxPos = xP;
		yyPos = yP;
		xxVel = xV;
		yyVel = yV;
		mass = m;
		imgFileName = img;
	}
	public Planet (Planet p) {
		/*  Copy constructor for the Planet class.
		*/
		xxPos = p.xxPos;
		yyPos = p.yyPos;
		xxVel = p.xxVel;
		yyVel = p.yyVel;
		mass = p.mass;
		imgFileName = p.imgFileName;
	}
	public double calcDistance(Planet p ){
	/* returns the distance between this Planet and Planet p.
	*/
		double dX = p.xxPos - this.xxPos;
		double dY = p.yyPos - this.yyPos;
		return Math.sqrt(dX*dX + dY*dY);
	}
	public double calcForceExertedBy(Planet p) {
		/* Calculates the force exerted by planet p on this planet using the 
		   universal law of gravitation.
<A NAME="4"></A>		 */
		double d = calcDistance(p);
		return G*mass*p.mass/(d*d);</B></FONT>
<FONT color="#151b8d"><A HREF="javascript:ZweiFrames('match93-1.html#4',3,'match93-top.html#4',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>	}
	public double calcForceExertedByX(Planet p) {
		// Calculates the x component of the force exerted by p, as per trig
		double dx = p.xxPos - this.xxPos;
		return calcForceExertedBy(p)*dx/calcDistance(p); 
	}
	public double calcForceExertedByY(Planet p) {
		// Calculates the y component of the force exerted by p, as per trig
		double dy = p.yyPos-this.yyPos;
		return calcForceExertedBy(p)*dy/calcDistance(p);
	}
	public double calcNetForceExertedByX(Planet[] planets) {
		/*  calcNetForceExertedByX takes an array of planets and calculates the net force's
			x-component. 
		*/
		double netForceX = 0;
		for (Planet p : planets) {
			if (! this.equals(p)){
				netForceX += calcForceExertedByX(p);
			}
		}
		return netForceX;
	}
	public double calcNetForceExertedByY(Planet [] planets) {
		//Same as above, but for the y-component.
		double netForceY = 0;
		for (Planet p: planets) {
			if (! this.equals(p)) {
				netForceY += calcForceExertedByY(p);
			}
		}
		return netForceY;
	}
	public void update(double dt,double fX,double fY) {
		/*  Calculates the acceleration on the Planet using the fX and fY parameters
			as well as the planet's mass. Then updates the position and velocity 
			instance variables (only once) for the specified dt interval.
		*/
		double xxAcc = fX/mass;
		double yyAcc = fY/mass;
		xxVel += xxAcc*dt;
		yyVel += yyAcc*dt;
		xxPos += xxVel*dt;
		yyPos += yyVel*dt;
	}
	public void draw(){
		//Draws the Planet object using StdDraw and its current position.
		StdDraw.picture(xxPos,yyPos,imgFileName);
	}
}</B></FONT>
</PRE>
</BODY>
</HTML>
